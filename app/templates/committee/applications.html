{% extends "base.html" %}
{% block title %}All Applications{% endblock %}

{% block content %}
<h2 class="mb-3">All Submitted Applications</h2>

<form class="row g-2 align-items-end mb-3" method="get" action="{{ url_for('committee.applications') }}">
  <div class="col-md-4">
    <label class="form-label">Filter by Status</label>
    <select class="form-select" name="status">
      <option value="" {% if not selected_status %}selected{% endif %}>All</option>
      <option value="Pending" {% if selected_status == "Pending" %}selected{% endif %}>Pending</option>
      <option value="Reviewed" {% if selected_status == "Reviewed" %}selected{% endif %}>Reviewed</option>
      <option value="Accepted" {% if selected_status == "Accepted" %}selected{% endif %}>Accepted</option>
      <option value="Rejected" {% if selected_status == "Rejected" %}selected{% endif %}>Rejected</option>
    </select>
  </div>
  <div class="col-md-8 d-flex gap-2">
    <button class="btn btn-primary" type="submit">Apply Filter</button>
    <a class="btn btn-outline-secondary" href="{{ url_for('committee.applications') }}">Reset</a>
    <a class="btn btn-secondary" href="{{ url_for('committee.dashboard') }}">Back</a>
  </div>
</form>

<div class="table-responsive">
  <table class="table table-bordered table-striped align-middle">
    <thead>
      <tr>
        <th>ID</th>
        <th>Scholarship</th>
        <th>Student ID</th>
        <th>Status</th>
        <th>Submitted At</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for a in applications %}
      <tr>
        <td>{{ a.id }}</td>
        <td>{{ a.scholarship.title if a.scholarship else a.scholarship_id }}</td>
        <td>{{ a.student_id }}</td>
        <td>{{ a.status }}</td>
        <td>{{ a.submitted_at }}</td>
        <td>
          <a class="btn btn-sm btn-dark" href="{{ url_for('committee.application_detail', application_id=a.id) }}">
            Open
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
